<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: js/file_handling.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: js/file_handling.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const fs = require('fs');
const path = require('path');
const {promisify} = require('util');
const {now} = require('./time');
const R = require('ramda');

const {existsSync, mkdirSync} = fs;
const writeFile = promisify(fs.writeFile);

/**
 * File Handling module.
 * @module js/file_handling
 * @see module:js/file_handling
 */


/**
 * A curried wrapper version of path.join. Joins 2 paths where the
 * first path precedes the second path.
 *
 * @func
 * @alias module:js/file_handling~pathJoin
 * @param {string} path1
 * @param {string} path2
 * @returns {string} Combined path1 and path2
 * @see {@link http://ramdajs.com/docs/#curry}
 */
const pathJoin = R.curry((path1, path2) => path.join(path1, path2));

/**
 * Returns a CSV title name as a string which is the current date in 
 * YYYY-MM-DD format with .csv concatenated at the end.
 *
 * @func
 * @alias module:js/file_handling~createCsvTitle
 * @param {string} - CSV body
 * @returns {string} CSV file name
 * @see {@link http://ramdajs.com/docs/#pipe}
 * @see {@link http://ramdajs.com/docs/#concat}
 */
const createCsvTitle = R.pipe(now('YYYY-MM-DD'), R.concat(R.__, '.csv'));

/**
 * Returns an array with the CSV file name in the index 0 and the CSV body
 * text in index 1.
 *
 * @func
 * @alias module:js/file_handling~createArgs
 * @param {string} csv - The CSV string
 * @returns {string[]} An array that contains 
 * the CSV title and CSV text body
 * @see {@link http://ramdajs.com/docs/#juxt}
 * @see {@link http://ramdajs.com/docs/#identity}
 */
const createArgs = R.juxt([createCsvTitle, R.identity]);

/**
 * Checks to see if a directory exists. If not its created.
 *
 * @func
 * @alias module:js/file_handling.checkCreateFolderSync
 * @param {string} path - path of directory
 * @returns {boolean}
 * @see {@link http://ramdajs.com/docs/#partial}
 */
const checkCreateFolderSync = function(path) {
    if (!existsSync(path)) {
        mkdirSync(path);
    }

    return true;
};

/**
 * A map version of checkCreateFolderSync to check multiple directories.
 *
 * @func
 * @alias module:js/file_handling.checkCreateFoldersSync
 * @param {string[]} - Array of string of directories
 * @returns {boolean[]}
 * @see {@link module:js/file_handling.checkCreateFolderSync}
 * @see {@link http://ramdajs.com/docs/#map}
 */
const checkCreateFoldersSync = R.map(checkCreateFolderSync);

/**
 * Creates the title for the CSV, uses the title as the file name, and 
 * writes the CSV content to it.
 *
 * @func
 * @alias module:js/file_handling.writeCSV
 * @param {string} folder - The path of desired directory
 * @param {string} csv - The CSV body text
 * @returns {Promise} Void
 * @see {@link http://ramdajs.com/docs/#curry}
 * @see {@link http://ramdajs.com/docs/#adjust}
 * @see {@link http://ramdajs.com/docs/#concat}
 * @see {@link http://ramdajs.com/docs/#apply}
 */
const writeCSV = R.curry(function(folder, csv) {
    return Promise.resolve(createArgs(csv))
    .then(R.adjust(pathJoin(folder), 0))
    .then(R.apply(writeFile));
});

module.exports = {checkCreateFolderSync, checkCreateFoldersSync, writeCSV};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-js_errors.html">js/errors</a></li><li><a href="module-js_file_handling.html">js/file_handling</a></li><li><a href="module-js_time.html">js/time</a></li><li><a href="module-scraper.html">scraper</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Feb 12 2018 19:51:13 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
